"sys=window.sys=\n{//2015-06-09-13-30\ndid:function sys_did(id,n){if(!n)return document.getElementById(id);\n\tvar r=n;n=n.firstChild;while(n)if(n.id==id)return n;else n=n.nextSibling;\n\tn=r.firstChild;while(n)if(r=did(id,n))return r;else n=n.nextSibling;}\n\n,dce:function sys_dce(n,p,t,i){var r=document.createElement(n);if(i)r.id=i;if(t)sys.dct(t,r);if(p)p.appendChild(r);return r;}\n\n,dcb:function sys_dcb(p,t,c,i){var r=sys.dce('button',p,t,i);r.onclick=c;return r;}//,dcb:function sys_dcb(p,t,i,c){var r=sys.dce('button',p,t,i);r.onclick=c;return r;}\n\n,dcbx:function sys_dcbx(p,txt,req,id){var r=sys.dce('button',p,txt,id);\n\tr.onclick=function(){sys.xhr(req);}\n\treturn r;}\n\n,dct:function sys_dct(t,p){var r=document.createTextNode(t);if(p)p.appendChild(r);return r;}\n\n,dci:function sys_dci(p,val,id,c,typ){var r=document.createElement('input');r.type=typ||'text';\n\tif(id)r.id=id;if(val)r.value=val;if(p)p.appendChild(r);if(c)r.onchange=c;return r;}\n\n,/**The Legendary \"bld\" function\n recursively build DomElements from json:params\n parent is optional\n if params is a string , then createTextNode under parent DomElement parent\n if params is an array , then bldTbl is called\n otherwise if params isnt a string(it is assumed that params is an object)\n where params should have properties:\n \tn:string : name of element\n \tt:(optional) string , create child text node and set the text to t\n \tid:(optional)\n \tname(optional)\n \tclk:(optional) a ref to a function which will be a onclick handler\n \tchng:(optional) a ref to a function which will be a onchange handler\n \ts:(optional) object , where properties are set into the created-node's style\n \ta:(optional) object , where properties are set into the created-node's properties and attributes\n \tc:(optional) array\n \t\t, recursive function call to this bld function\n \t\t, but with items of c as the param and this node as a parent\n \t\t, Hence The POWER of this bld-function\n\n when params.n is \"select\" or \"table\", the internal implementation uses the functions bldSlct or bldTbl\n when params.n is \"bldForm\" or \"bldModal\" or \"bldDataGrid\", the named-function is called on params\n\n\n BuildDomTree params::= id\n\t,n:nodeName\n\t,t:text\n\t,clk:onclick-function\n\t,chng:onchange-function\n\t,a:jsobj-attributes\n\t,c:jsarray-children-recursive-params\n\t,s:jsobj-style\n\t,(depricated)clpsbl:string-title:collapsable\n\n\t; or params canbe string, or array:call bldTbl\n\t; parent: domElement */\nbld:function sys_bld(params,parent){\n var t=sys;try{if(typeof(params)=='string')return t.dct(params,parent);\n var p=params,n=p.n?document.createElement(p.n):p.t!=undefined?document.createTextNode(p.t):p;\n\tif(p.n&&(p.t!=undefined))n.appendChild(document.createTextNode(p.t));\n\tif(p.n&&p.n.toLowerCase()=='input')n.type=(p.a?p.a.type:0)||'text';\n\tif(p.id)n.id=p.id;\n\tif(p.name||(p.a&&p.a.name))n.name=p.name||p.a.name;\n\tif(p.clk)n.onclick=p.clk;\n\tif(p.chng)n.onchange=p.chng;\n\tif(p.s)for(var i in p.s)n.style[i]=p.s[i];\n\tif(p.a)for(var i in p.a)n[i]=p.a[i];\n\tif(p.c){if(p.n&&p.n.toLowerCase()=='select')t.bldSlct(p,n);\n\t\telse if(p.n&&p.n.toLowerCase()=='table')t.bldTbl (p,n);\n\t\telse for(var i=0;i<p.c.length;i++)\n\t\t if(typeof(p.c[i])=='string')//t.dct(p.c[i],n);\n\t\t\tn.appendChild(document.createTextNode(p.c[i]));\n\t\telse\n\t\t\tt.bld(p.c[i],n);\n\t}\n\t//if(p.clpsbl)n=t.createCollapsable(p.clpsbl,parent,p.id,n);else\n\tif(parent)parent.appendChild(n);\n\t}catch(ex){console.error('sys.bld:ex',ex);}return n;\n}//function bld\n\n,/** params: same as bld.params\n\t\t.columnsHidden integer count of the first columns that should not generate html\n\t\t, .c  2 dimensional array of elements ,this method will nest each elem in a TD\n\t\t\t, and the elem is same as bld.params,recursive\n\t\t, .headings 1dim array , this method nests each elem in a TH, and the elem is same as bld.params\n\t\t, .footer ,same as headings ,but for footer of table\n\t\t, onDoneCell : func called when td/th done ,args to func:td/th , paramObj-for-cell , rowIndex , cellIndex , paramObj-for-row , paramObj-for-body\n\t\t, onDoneRow  : func called when tr done  ,args to func:tr , paramObj-for-row , rowIndex , paramObj-for-body\n\t\t, onDoneBody : func called when tbody done\n\t, pr:parent dom-element , based-on/uses dce\n\t*/\n bldTbl:function sys_BuildHtmlTable(params,pr){\n\tvar tbl=pr&&pr.nodeName=='TABLE'?pr\n\t\t:sys.dce('table',pr,null,params?params.id:0)\n\t\t,tb=tbl?(tbl.tBodies[0]||tbl.createTBody()):0;\n\tif(params.headings){\n\t\tvar ht=tbl.tHead,a=params.headings,tr,th;\n\t\tif(!ht)ht=tbl.createTHead();\n\t\ttr=ht.children?ht.children[0]:0;\n\t\tif(!tr)tr=ht.insertRow();\n\t\tfor(var i in a)\n\t\t\tif(!(params.columnsHidden>=i))\n\t\t\t{th=sys.dce('th',tr);\n\t\t\t\tsys.bld(a[i],th);\n\t\t\t}\n\t\tif(params.onDoneRow)\n\t\t\tparams.onDoneRow(tr,params.headings,0,params)\n\t}\n\tif(params.c){\n\t\tvar r,a=params.c,tr,td;\n\t\tfor(var i in a){\n\t\t\ttr=tb.insertRow();\n\t\t\ttr.pk=a[i][j];\n\t\t\tif(a[i])\n\t\t\t{\tfor(var j in a[i])\n\t\t\t\t\tif(!(params.columnsHidden>=i)){\n\t\t\t\t\t\ttd=tr.insertCell();\n\t\t\t\t\t\tsys.bld(a[i][j],td);\n\t\t\t\t\t\tif(params.onDoneCell)\n\t\t\t\t\t\t\tparams.onDoneCell(td,a[i][j],i,j,a[i],params)\n\t\t\t\t\t}\n\t\t\t\tif(params.onDoneRow)\n\t\t\t\t\tparams.onDoneRow(tr,a[i],i,params)\n\t\t\t}\n\t\t}\n\t}\n\tif(params.footer){\n\t\tvar ht=tbl.tFoot,a=params.footer,tr,td;\n\t\tif(!ht)ht=tbl.createTFoot();\n\t\ttr=ht.children?ht.children[0]:0;\n\t\tif(!tr)tr=ht.insertRow();\n\t\tfor(var i in a)\n\t\t\tif(!(params.columnsHidden>=i)){\n\t\t\t\ttd=tr.insertCell();\n\t\t\t\tsys.bld(a[i],td);}}\n\treturn tbl;}\n\n,/**create a select tag,\n\tpr is the parent DomElement\n\t\t, if Select, then uses this element\n\t\t, if pr is not select, then a child select is created\n\tparams.select:the selected optional\n\tparams.c:array of options in select\n\t\teach item in array-c can be a string\n\t\tor an object with (two properties:text and value )*/\nbldSlct:function sys_BuildSelect(params,pr){\n\tvar i,n,t,v,found=0\n\t\t,c=params.c\n\t\t,s=params.selected//||params.a.selected;\n\tif(!pr||!pr.nodeName||pr.nodeName!='SELECT')\n\t\tpr=sys.dce('SELECT',pr)\n\tfor(i=0;c&&i<c.length;i++){\n\t\tpr.options[pr.options.length]=n=\n\t\t\ttypeof(c[i])=='string'\n\t\t\t||!((c[i] instanceof Array&&c[i].length>1)||c[i].value)\n\t\t\t?new Option(t=v=c[i])\n\t\t\t:new Option(\n\t\t\t\tt=(c[i].text||c[i][0])\n\t\t\t ,\tv=(c[i].value||c[i][1])\n\t\t\t );\n\t\tif(s==t||s==v)\n\t\t\tfound=n.selected=true;\n\t}if(s && !found)\n\t{pr.options[pr.options.length]=n=new Option(s)\n\t\tn.selected=true;}\n\treturn pr;}\n\n\n,/**\nparams:(obj)\n\tc:array ,like bld\n\t,form:optional:to call bldForm contained in this modal\n\t,title:str(optional)\n\t,btns:{close:<str:(default:'Close') or if null then wont show 'close'-btn>\n\t\t,<key:str:button-title> : <return value when clicked,\n\t\t\tor func that is called when btn is clicked(args:btn,key,modalDialog,paramObj) >\n\t\t,,,\n\t}//btns\n\n\texample:\n\tdiv=sys.bldModal({n:'p',c:[{n:'h1',t:'Modal Dialog'},'inp:',{n:'select',selected:3,c:[8,5,3,'yea','joe']}]},document.body)\n\t*/\nbldModal:function(params,pr){\n\tvar div=sys.dce('div',pr),r;\n\tdiv.style.cssText=\"position: absolute; top: 25%; left: 25%; width: 50%; height: 50%;background-color:#f0f0ff; border: 3px solid blue; border-radius: 10px; padding: 15px; box-shadow: 10px 10px 5px #888888,10px 10px 15px #8888f8 inset,-10px -10px 15px #8888f8 inset;\";\n\tsys.dcb(div,'x',function(){div.parentNode.removeChild(div);})\n\tsys.bld(params,div)\n\treturn div;}\n\n,/**params:\n\tmodal:(boolean:optional:default false)\n\th:fields:array\n\t\t,if item string,label and name-of-field and text-data-type\n\t\t,if item array then ix0 is label and name-of-field, and 2nd-item is array of enums of a drop-down-select\n\t\t,if object: name:name-of-field, t:label , type:('text','textarea','number','regex','datetime',,,ect)\n\t\t\tother props are to be written as attributes in the generated element\n\ta:1d-array of field values\n\tclss:(defaults to 'data')className used for input or select or textarea\n\tdepricated:orientation:(h or v ,default v, v:vertical , h:horizontal )\n\tmodules:int for number of fields per column,not implemented, two approaches,\n\t\t1:(default) going down a column then next column\n\t\t2: going horizontally then next row\n\tbtns:array for buttons, not implemented yet\n\n returns params with added props:\n\tdataNodes:obj : prop-key field-name, prop-value is data-element(input or select or textarea)\n\tgetJson:func returns as json-obj values in the dataNodes\n\n example:\n x=sys.bldForm(\n\t{\th:[\n\t\t\t{t:'no'\n\t\t\t\t,name:'no',readonly:true}\n\t\t\t,'path'\n\t\t\t,['contentType',['text/plain'\n\t\t\t\t,'text/html','text/json'\n\t\t\t\t,'text/javascript'\n\t\t\t\t,'image/png','text/css']]\n\t\t\t,{t:'lastModified'\n\t\t\t\t,name:'lastModified'\n\t\t\t\t,type:'date-time'}\n\t\t\t,{t:'data',name:'data',type:'textarea'}\n\t\t]\n\t ,a:[5\n\t\t,'testPath'\n\t\t,'text/plain'\n\t\t,1000\n\t\t,'x'\n\t\t]\n\t}\n  ,\n  div=sys.bldModal({n:'h1',t:'Modal Dialog &amp; bldForm'},document.body)\n  )\n\n*/\nbldForm:function(params,pr){\n\tif(!params||!params.h||!params.a)\n\t\treturn;\n\tvar p=params\n\t,tbl=p.tbl= ((pr&&pr.nodeName=='TABLE')?\n\t\tpr:sys.dce('table',pr,null,p.id))\n\t,tb=tbl?(tbl.tBodies[0]||tbl.createTBody()):0\n\t,h=p.h,a=p.a\n\t,hi,ht,ai,tr,td,th,x;\n\tp.dataNodes=[];\n\tfor(var i in h){\n\t\ttr=tb.insertRow();\n\t\thi=h[i];ht=typeof(hi)\n\t\tai=a[i]\n\t\tth=sys.dce('th',tr);\n\t\ttd=tr.insertCell();\n\t\tif(ht=='string')\n\t\t{\tsys.bld(hi,th);x=0\n\t\t\tp.dataNodes.push(\n\t\t\t\tai!=undefined && ai!=null\n\t\t\t\t?x=sys.dci(td,ai,hi)\n\t\t\t\t:a[i]);\n\t\t\tif(x){x.name=hi;x.className=p.clss||'data';}\n\t\t}\n\t\telse if(hi instanceof Array){\n\t\t\tsys.bld(hi[0],th);\n\t\t\tvar c=hi[1];\n\t\t\tp.dataNodes.push(\n\t\t\t\tx=sys.bldSlct({clss:p.clss||'data'\n\t\t\t\t\t,c:c,selected:ai},td))\n\t\t\tx.name=hi[0]\n\t\t}else{var nm=hi.name||hi.t,ttl=hi.t||nm;sys.bld(ttl,th);switch(hi.type){\n\t\t\tcase 'textarea':\n\t\t\t\tp.dataNodes.push(x=sys.dce('TEXTAREA',td));\n\t\t\t\tx.className=p.clss||'data';//hi.clss||\n\t\t\t\tx.name=nm;\n\t\t\t\tx.value=ai\n\t\t\t\tbreak;\n\t\t\tcase 'select':\n\t\t\t\tp.dataNodes.push(x=sys.bldSlct({selected:ai,c:p.c||p.a},td));\n\t\t\t\tx.className=hi.clss||'data';\n\t\t\t\tx.name=nm;\n\t\t\t\tbreak;\n\t\t\tcase 'hidden':tr.style.display='none';\n\t\t\tdefault: //case 'password':case 'radio':case 'checkbox':case 'date':case 'datetime':case 'number':case 'regex':case 'file':case 'slider':\n\t\t\t\tp.dataNodes.push(x=sys.dci(td));\n\t\t\t\tx.type=hi.type;\n\t\t\t\tx.name=nm;\n\t\t\t\tvar cr=hi.type=='checkbox'||hi.type=='radio'\n\t\t\t\tif((cr&&hi.value)||ai!=undefined)//\n\t\t\t\t\tx.value=cr?hi.value:ai\n\t\t\t\tx.className=p.clss||'data';//hi.clss||\n\t\t\t\tif(cr&& ai==hi.value)\n\t\t\t\t\tx.checked=x.selected=(hi.value||true);\n\t\t\t}for(var j in hi)if(j!='clss')\n\t\t\t\tx.setAttribute(j,x[j]=hi[j])\n\t\t}\n\t}\n\tp.getJson=function(){var p=this.p||p||this,d=this.dataNodes||(p&&p.dataNodes)||[],r={};\n\t\tfor(var i in d){\n\t\t\tvar x=d[i];\n\t\t\tif(x.nodeName=='SELECT')\n\t\t\t{var j=x.selectedIndex;if(j!=-1){\n\t\t\t\tvar o=x.options[j],v=o.value;\n\t\t\t\tr[x.name]=v!=undefined&&v!=null?v:o.text;}}\n\t\t\telse if(x.type=='checkbox'||x.type=='radio')\n\t\t\t{if(x.checked||x.selected)\n\t\t\t\tr[x.name]=x.value;}\n\t\t\telse\n\t\t\t\tr[x.name]=x.value;\n\t\t}return r;}\n\tp.getJson.p=p\n\treturn p;\n}//bldForm\n\n,/**primary key is the first column, url of json crud,\n\turl params:datagrid=<tbl-name>\n\t\t& <optional:limit>\n\t\t& <optional:cursor=<refInt>>\n\t\t& op=query , update , insert , delete\n\t\t\tquery :cols(seq of col-names),where(seq of key-value pairs)\n\t\t\tupdate:cols(seq of key-value pairs), where(seq of key-value pairs)\n\t\t\tinsert:cols(seq of key-value pairs)\n\t\t\tdelete:where(seq of key-value pairs)\n\n build a table that has event handlers along with xhr\n */\n bldDataGrid:function sys_BuildDataGrid(url,pr){\n var x=xhr(url)\n sys.bldTbl({},pr);\n}\n\n,/**facade function to wrap title-text into a structure for bld*/\nfset:function sys_fset(ttl,a,args){\n var x={n:'legend',t:ttl};\n\tif(!(a instanceof Array))a=[x,a];\n\telse a.unshift(x);\n\tif(args&&args.length>2)for(var i=2;i<args.length;i++)a.push(args[i]);\n\treturn {n:'fieldset',s:{padding:'1px',margin:'1px'},c:a }; }\n\n,ttlTxt:function sys_ttlTxt(ttl,p){\n if(!p.s)p.s={};\n\tp.n='input';\n\tp.s.border='0px solid while';\n\tif(!p.s.width)p.s.width='100%';\n\treturn fset(ttl,p,arguments);}\n\n,util:{\n\tcopy:function(o,deep){//deep:optional, array ,which is list of copied items\n\t\tvar t=typeof(o),p=sys.util.isPrimitive(v,t)\n\t\t,r=p?o:o instanceof Array?[]:{};\n\t\tif(p)return r;\n\t\tif(!deep)\n\t\t\tfor(var i in o)\n\t\t\t\tr[i]=o[i]\n\t\telse{\n\t\t\tdeep.push([o,r])\n\t\t\tfor(var i in o)\n\t\t\t{var v=o[i],t=typeof(v)\n\t\t\t\tif(sys.util.isPrimitive(v,t))\n\t\t\t\t\tr[i]=v;\n\t\t\t\telse if(v&&v.cloneNode)\n\t\t\t\t\tr[i]=v.cloneNode(deep)\n\t\t\t\telse{\n\t\t\t\t\tr[i]=sys.util.copy(v,deep)\n\t\t\t\t}\n\t\t\t}\n\t\t}\n\t\treturn r;\n\t}//copy\n\t,isPrimitive:function primitive(v,t){if(!t)t=typeof(v);return\n\t\tv==null||v==undefined||t=='string'||t=='number'||t=='boolean';}\n\t,extend:function(dst,src){\n\t\tfor(var i in src)\n\t\t{var v=dst[i];if(v==undefined)\n\t\t\tdst[i]=src[i];\n\t\t}\n\t\treturn dst;}\n}//sys.util\n\n,/**\n * parameter p attributes\n *\tdata: body data of the xhr request sent to the server ,default null, if not string then will be JSON.stringify(data)\n *\theaders: json-object of name/value , set as request headers, defaults to null\n *\tresponseType:(optional)  \"arraybuffer\", \"blob\", \"document\", \"json\", or \"text\" , xhr defaults to \"text\"\n *\tonload: reference to a function that is called in asynchronous mode\n\t\t(defaults to null which is synchronise mode), when the server successfully responds, the func is given as a param the xhr obj and second param p\n *\tonprogress: reference to a function that is called in asynchronous mode (defaults to null )\n\t\t, when the server successfully responds\n\t\t // progress on transfers from the server to the client (downloads)\n\t\tfunction onProgress (oEvent) {\n\t\t  if (oEvent.lengthComputable) {\n\t\t\tvar percentComplete = oEvent.loaded / oEvent.total;\n\t\t\t// ...\n\t\t  } else {\n\t\t\t// Unable to compute progress information since the total size is unknown\n\t\t  }\n\t\t}\n\n *\tonerror: reference to a function that is called in asynchronous mode\n\t\t(defaults to null which is synchronise mode), when the server or xhr fails\n *\tmethod: string , POST, GET, defaults to POST\n *\turl: the url of xhr , defaults to empty string\n * */\nxhr:function sys_xhr(p){\n if(!p)return p;\n var ct='Content-Type',cs='charset'\n\t\t,x=typeof XMLHttpRequest === \"undefined\"\n\t\t?new ActiveXObject(\"microsoft.XMLHTTP\")\n\t\t:new XMLHttpRequest();x.p=p;p.xhr=x;\n\tx.open(p.method||'POST',p.url||'', p.onload );\n\tif(p.headers)for(var i in p.headers)\n\t\tx.setRequestHeader(i,p.headers[i]);//console.log('scriptedReq:header['+i+']:'+headers[i]);\n\tif(!p.headers || !p.headers[ct])x.setRequestHeader(ct, 'text/json');//'application/x-www-form-urlencoded');\n\tif(!p.headers || !p.headers[cs])x.setRequestHeader(cs, 'utf-8');\n\tif(p.onload)x.onload=p.onload\n\tif(p.onprogress)x.onprogress=p.onprogress\n\tif(p.onerror)x.onerror=p.onerror\n\tif(p.responseType)x.responseType=p.responseType\n\tx.send((typeof p.data)=='string'?p.data:JSON.stringify(p.data));\n\tconsole.log('xhr:response:',x.response,p,x);\n\treturn x.response;//p.asJson?JSON.parse ( x . responseText ) : x . responseText ;\n\t}//function xhr\n\n,toJsonBld:{\n toJb:function(o,stack){\n\tvar n=o&&o.constructor&&o.constructor.name\n\t,f=sys.toJsonBld[n]\n\treturn f?f(o):sys.toJsonBld.props(o);}\n ,isInStack:function(o,stack){\n\tfor(var i=0;i<stack.length;i++)\n\t\tif(o==stack[i][1]){\n\t\t\tvar x=stack[0][0].meta\n\t\t\tif(!x)stack[0][0].meta=x={};\n\t\t\tif(!x.loop)\n\t\t\t\tx.loop=[];\n\t\t\tx.loop.push(stack[i][1]);\n\t\t\treturn stack[i][0];}\n\tif(stack[0]&&stack[0][0]&&stack[0][0].meta&&stack[0][0].meta.loop){\n\t\tvar x=stack[0][0].meta.loop\n\t\tfor(var i=0;i<x.length;i++)\n\t\t\tif(x[i]==o)\n\t\t\t\tconsole.log('inLoop',o);\n }}\n ,props:function(o,stack){\n\tvar classNames=[\n\t'CSSStyleRule'\n\t,'CSSImportRule'\n\t,'CSSMediaRule'\n\t,'StyleSheet'\n\t,'CSSFontFaceRule'\n\t,'CSSGroupingRule'\n\t,'CSSKeyframeRule'\n\t,'CSSKeyframesRule'\n\t,'CSSNamespaceRule'\n\t,'CSSPageRule'\n\t,'CSSRule'\n\t,'CSSSupportsRule'\n\t,'CSSViewportRule'];\n\tif(o){var a={},stk=stack||[],sf=[a,o],f\n\t,x=sys.toJsonBld.isInStack(o,stack);if(x)return x;stk.push(sf)\n\t,n=o&&o.constructor&&o.constructor.name;\n\t\tif(n)a.constructorName=n;\n\t\tfor(var i in o)\n\t\t{x=o[i];\n\t\t\tif(x!=undefined&&x!=null){//&&x!=''\n\t\t\tn=x&&x.constructor&&x.constructor.name\n\t\t\tf=sys.toJsonBld[n];if(f)a[i]=f(x)\n\t\t\telse{f=classNames[n]\n\t\t\ta[i]=f?sys.toJsonBld.props(x):x}}}\n\t\tstk.pop();\n\t\treturn a;}}\n ,list:function(o,stack){\n\tvar a=[]\n\t,stk=stack||[],sf=[a,o]\n\t,n=sys.toJsonBld.isInStack(o,stack);\n\tif(n)return n;stk.push(sf)\n\tn=(o&&o.length)||0;\n\tfor(var i =0;i<n;i++)\n\t\ta.push(sys.toJsonBld.toJb(o[i]))\n\tstk.pop();\n\treturn a;}\n ,'StyleSheetList':function(o,stack){return sys.toJsonBld.list(o,stack);}\n ,'CSSRuleList':function(o,stack){return sys.toJsonBld.list(o,stack);}\n ,'CSSStyleSheet':function(o,stack){\n\tvar a={},b=['href','type','title','disabled','media']\n\t,stk=stack||[],sf=[a,o]\n\t,n=sys.toJsonBld.isInStack(o,stack);\n\tif(n)return n;stk.push(sf)\n\tfor(var i=0;i<b.length;i++)\n\t{n=b[i],x=o[n];if(x&&x!='')\n\t\ta[n]=x;}\n\tb=o.rules||o.cssRules//CSSRuleList\n\tif(b)a.s=sys.toJsonBld.list(b,stack);\n\t//for(var i=0;b&&b.length&&i<b.length;i++)c.push(sys.toJsonBld.toJb(b[i]))\n\tstk.pop();\n\treturn a;}\n ,'CSSStyleDeclaration':function(o,stack){\n\tvar n=o&&o.length||0,a={x:{}}\n\t,stk=stack||[],sf=[a,o]\n\t,n=sys.toJsonBld.isInStack(o,stack);\n\tif(n)return n;stk.push(sf)\n\tx=o.cssText;if(x!=undefined&&x!='')\n\t\ta.t=x// this is a string that has packed\n\t//selectorText and braces encompassing o.style.cssText\n\tfor(var i=0,k;i<n;i++)\n\t{k=o[i]\n\t\ta[k]=o[k]\n\t}\n\tfor(var i in o){\n\t\tx=o[i];\n\t\tif(x&&x!=''&&i!='parentRule')//&&a[i]==undefined)\n\t\t\ta.x[i]=x;}\n\tstk.pop();\n\treturn a;}\n,\ndom2json:function dom2json(n,meta,stack){\n\tfunction indexOf(a,e){var i=a.length-1;for(;i>=0&&a[i]!=e;i--);return i;}\n\tvar r={n:n.nodeName},a=n.attributes,stk=stack||[],sf=[r,n]\n\t,x=sys.toJsonBld.isInStack(n,stack);if(x)return x;stk.push(sf)\n\tx=a&&a.length\n\tif(n.id)r.id=n.id;if(!meta){stk[0][0].meta=meta={}}\n\tif(x)for(var i=0;i<x;i++)\n\t{\tvar nm=a[i].name,v=a[i].value;\n\t\tif( v!=undefined && nm!='id' && nm!='style' )\n\t\t{if(!r.a)r.a={};\n\t\t\tr.a[nm]=v;}\n\t}\n\tif(n.style && n.style.cssText){\n\t\tvar m,v,z;a= n.style.cssText.split(';')\n\t\tif(a  ){r.s={}; //&&(! z.trim || z.trim())\n\t\t  for(var i in a){\n\t\t\tz=a[i].split(':');m=z[0];v=z[1];\n\t\t\tif( m && m.trim) m=m.trim();\n\t\t\tif( v && v.trim) v=v.trim();\n\t\t\tif(v!=undefined && (v.length==undefined || v.length>0))//&& (!v.trim || v.trim()))\n\t\t\t\tr.s[m]=v;\n\t}}}\n\tif(n.nodeName=='LINK'){\n\t\tif(!meta.links)meta.links=[];meta.links.push(sf)\n\t\tconsole.log('stackFrame:links:stackFrame=',sf,',meta=',meta,',stack=',stk,',currentObj=',r,n);\n\t}else if(n.nodeName=='SCRIPT'){\n\t\tif(!meta.scripts)meta.scripts=[];meta.scripts.push(sf)\n\t\tconsole.log('stackFrame:scripts:stackFrame=',sf,',meta=',meta,',stack=',stk,',currentObj=',r,n);\n\t}else if(n.nodeName=='IMG'){\n\t\tif(!meta.imgs)meta.imgs=[];meta.imgs.push(sf)\n\t\tif(!meta.imgsBase64)meta.imgsBase64={}\n\t\tvar src=n.src,z=meta.imgsBase64[src];\n\t\tif(z)\n\t\t\tconsole.log('dom2json:img:repeated-src:previous result:',z,', current-img:',n);\n\t\telse{z=meta.imgsBase64[src]={src:src}\n\t\t\tvar canvas = document.createElement('CANVAS');\n\t\t\tvar ctx = canvas.getContext('2d');\n\t\t\tcanvas.height = n.height;\n\t\t\tcanvas.width = n.width;\n\t\t\tctx.drawImage(n, 0, 0);\n\t\t\tz.base64 = canvas.toDataURL('png');}\n\n\t\tconsole.log('dom2json:imgs:stackFrame=',sf,',meta=',meta\n\t\t\t,',stack=',stk,',currentObj=',r,n,',meta.imgsBase64[',src,']=',z);\n\t}if(n.src){\n\t\tif(!meta.src)meta.src=[];meta.src.push(sf)\n\t\tconsole.log('stackFrame:src:stackFrame=',sf,',meta=',meta,',stack=',stk,',currentObj=',r,n);\n\t}if(n.href){\n\t\tif(!meta.href)meta.href=[];meta.href.push(sf)\n\t\tconsole.log('stackFrame:href:stackFrame=',sf,',meta=',meta,',stack=',stk,',currentObj=',r,n);\n\t}\n\n\tx=n.firstChild;\n\tif(x&&!x.nextSibling&&x.nodeType==Node.TEXT_NODE)\n\t{var v=x.value||x.data;if(v.trim())\n\t\tr.t=v;}\n\telse if(x )//&& x.nodeName!='SCRIPT')\n\t{r.c=[];while(x)\n\t {\tif(x.nodeType==Node.ELEMENT_NODE)\n\t\t{var z=sys.toJsonBld.dom2json(x,meta,stk)\n\t\t\tr.c.push(z);\n\t\t}//if(x.nodeName!='SCRIPT')\n\t\telse if(x.nodeType==Node.TEXT_NODE)\n\t\t{var v=x.value||x.data;if(v.trim())\tr.c.push(v);}\n\t\telse console.log('sys.toJsonBld.dom2json:unknown nodeType:',x);\n\t\tx=x.nextSibling;}}\n\tif(!stack)\n\t\tmeta.css=r.css=sys.toJsonBld.toJb(document.styleSheets,[])\n\telse sf.pop()\n\treturn r;}//dom2json\n\n ,init:function(){\n\tvar a=[{},{}]\n\ta[2]=sys.toJsonBld.dom2json(document.head,a[0],[])\n\ta[3]=sys.toJsonBld.dom2json(document.body,a[1])//,cssSheetList2jb(document.styleSheets)\n\treturn a;\n }//init:function\n}//sys.toJsonBld\n\n\n\n/*dbCache-sections\n\tFiles\n\t\timages\n\t\tcss\n\t\tHtml\n\t\t\tlogin\n\n\t\t\tenum Screen\n\t\t\t\tProjectsList\n\t\t\t\t,ProjectScreen\n\t\t\t\t,BuildingScreen\n\t\t\t\t,FloorScreen\n\t\t\t\t,UsersList\n\t\t\t\t,User\n\t\t\t\t,Sheet\n\t\t\t\t,ReportsMenu\n\t\t\t\t,LogMenu\n\t\t\t\t,ConfigMenu\n\t\t\t\t,Search\n\n\t\tjs\n\n\tdbTables\n\t\tProjects\n\t\t\tBuildings\n\t\t\t\tFloors\n\t\t\t\t\tSheets\n\n\tuploads\n\tLog\n\tOffline\n\n\nScreens\n\tProjectsList\n\t\tBuildings\n\tBuildings\n\tFloor\n\tUsersList\n\tConfig\n\tReport\n\tLog\n\nServer op (xhr)\n\tgetDbProjBdlngFlr  ,each project is loaded seperatly (packaged with proj are all buildings and Floors), sheets are loaded seperatly based on each dbTblFloor\n\tgetDbSheets\t//must pageanate 1MBytes\n\t--getSheetUploads, just use http-get\n\tgetAppBootStrap, includes screens( jsonBld of html +css) and js app-lib\n\tlogin,logout\n\t,newProject,newBuilding,newFloor,newSheet,newUser\n\t,deleteProject,deleteBuilding,deleteFloor\n\t,deleteSheet,deleteUser,userChngPw,query\n\t,xhrEdit,saveSheet\n\t,syncLastModified //check LM of proj,bld,flr,sheet,files,uploads,Logs,User,UserActivity\n\t,syncOffline\n\nlastModified based synchronisation between client-LocalStorage and server-DB\n\n*/\n\n,bootStrap:{\n\tinit:function(){\n\t\t/*call StorageList\n\t\t,asking for all Storage-entries past client-side-value lastModifies //depricated::check if     firstTime-run, if so, then load application\n\t\t\t( files( html(,,,) , css(,,,)\n\t\t\t\t, js(sys.js\n\t\t\t\t\t, app.js(db)\n\t\t\t\t\t, each screen\n\t\t\t\t\t, each component\n\t\t\t\t\t)\n\t\t\t\t)\n\t\t\t ,db(projectsList , proj/bld/flr , not sheets)\n\t\t\t ,uploads,users\n\t\t\t)\n\t\tcheck storage howMuch up-to-date lastModified\n\t\t\tprepare the list of lastModified entities\n\t\t\t\tfiles\n\t\t\t\tdb\n\t\t*/\n\n\t\t/*files:\n\t\teu059s.file.login.html\t// todo:include all login dependencies\n\t\teu059s.file.main.html\n\t\teu059s.file.main.css\n\t\teu059s.file.sheet.html\n\t\teu059s.file.\n\n\t\t*/\n\t\tsys.bootStrap.introspection.init()\n\t}//init\n\n\t,introspection:{\n\t/*Introspection:build gui for application-heirarchy, and operations\n\t\tfiles-list + files\n\t\timages-list + images\n\t\tdb:projList + proj/bld/flr\n\t\t//lclStrg\n\t\t//lastModified\n\t\t//offline\n\t\t//SrvrOp\n\t*/\n\tinit:function(a,p){\n\t\t/*\n\t\ta:2d-array from server:AppEU059s.Op.StorageList, first line is header names\n\t\t[[\tStorage.C.no\t,\tStorage.C.path\t,\tStorage.C.contentType\t,\tStorage.C.lastModified] // data is not included\n\t\t\t,\n\t\t\t,\n\t\t\t,\n\t\t\t[,,,]\n\t\t\t,\n\t\t\t,\n\t\t\t,\n\t\t]\n\t\t*/if(!a)a=[['Storage.C.no' , 'Storage.C.path' , 'Storage.C.contentType' , 'Storage.C.lastModified','Storage.C.data']]\n\t\tif(!p)p=document.body\n\t\tvar ttl='sys.bootStrap.introspection.storageEntriesTable';sys.dce('h1',p,ttl)\n\t\tvar h=a.splice(0,1)[0],b=\n\t\t[\t{\tt:'Reload all Storage entries'\n\t\t\t\t,req:{\t'op':sys.Op.StorageList\n\t\t\t\t\t,onload: //sys.bootStrap.introspection.init\n\t\t\t\t\tfunction(){console.log(ttl,'Reload all Storage entries','xhr-onload',arguments);}\n\t\t\t\t}\n\t\t\t}\n\t\t\t,{\tt:'New Storage entry'\n\t\t\t\t,c:function(){\n\t\t\t\t\tvar sc=sys.dbSchema.storage\n\t\t\t\t\t,formH=[{t:sc[0].name,readonly:true}\n\t\t\t\t\t\t,sc[1]\n\t\t\t\t\t\t,[sc[2].name,sc[2].type]\n\t\t\t\t\t\t,sc[3],sc[4]]\n\t\t\t\t\tform=sys.bldForm(\n\t\t\t\t\t\t{\th:formH\n\t\t\t\t\t\t ,a:[5\n\t\t\t\t\t\t\t,'testPath'\n\t\t\t\t\t\t\t,'text/plain'\n\t\t\t\t\t\t\t,1000\n\t\t\t\t\t\t\t,'x'\n\t\t\t\t\t\t\t]\n\t\t\t\t\t\t}\n\t\t\t\t\t\t,\n\t\t\t\t\t\tdiv=sys.bldModal({n:'h1',t:'New Storage Entry Form'},document.body)\n\t\t\t\t\t)// form=sys.bldForm\n\t\t\t\t\tsys.dcb(div,'Create new entry',function(){\n\t\t\t\t\t\tvar reqData=form.getJson();reqData.op=sys.Op.StorageNew\n\t\t\t\t\t\tvar req=\n\t\t\t\t\t\t{data:reqData,responseType:'json',\n\t\t\t\t\t\t\tonload:function(rsp,x){\n\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onload',arguments\n\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr-ok for gui/dom '\n\t\t\t\t\t\t\t\t);//console.log\n\t\t\t\t\t\t\t\tvar tb,tbl=sys.bootStrap.introspection.storageEntriesTable\n\t\t\t\t\t\t\t\tif(!tbl)\n\t\t\t\t\t\t\t\t\treturn;\n\t\t\t\t\t\t\t\ttb=(tbl.tBodies[0]||tbl.createTBody())//if(!tb)return;\n\t\t\t\t\t\t\t\tvar tr=tb.insertRow(),x=rsp['return'];\n\t\t\t\t\t\t\t\t//five columns:no,path, contentType, lastModified, data\n\t\t\t\t\t\t\t\tfor(var i in formH)\n\t\t\t\t\t\t\t\t{var td=tr.insertCell(),x=reqData[formH[i].name];\n\t\t\t\t\t\t\t\t if(x)\n\t\t\t\t\t\t\t\t\tsys.bld(x,td);\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonprogress:function(e){\n\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onprogress',arguments\n\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr for gui/dom '\n\t\t\t\t\t\t\t\t\t,e.loaded,e.total,Math.round(100*e.loaded/e.total),'%'\n\t\t\t\t\t\t\t\t);//console.log\n\t\t\t\t\t\t\t},\n\t\t\t\t\t\t\tonerror:function(){\n\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onerror',arguments\n\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr for gui/dom '\n\t\t\t\t\t\t\t\t);//console.log\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}//req\n\t\t\t\t\t\tsys.xhr(req)\n\t\t\t\t\t }//function onclick:button:'Create new entry'\n\t\t\t\t\t)//dcb\n\t\t\t\t\t//sys.xhr(req)\n\t\t\t\t}//function onclick\n\t\t\t}//button:new Entry\n\t\t]//array b\n\t\tb.map(function(o,i){if(o.req)sys.dcbx(p,o.t,o.req);else sys.dcb(p,o.t,o.c);})\n\t\tsys.bootStrap.introspection.storageEntriesTable=sys.bldTbl(\n\t\t\t{\tc:a\n\t\t\t\t,headings:h\n\t\t\t\t//,onDoneRow:function(tr,rObj,rIx,bObj)\n\t\t\t\t,onDoneCell:function(td,cellObj,rowIx,cellIx,rObj,bObj)\n\t\t\t\t{var obj={td:td,cellObj:cellObj,cellIx:cellIx,rowObj:rObj,rowIx:rowIx,tbodyParam:bObj}\n\t\t\t\t,str='sys.bootStrap.introspection.init.bldTbl.cell:Storage.C.'\n\t\t\t\t// console.log('sys.bootStrap.introspection.init.bldTbl.onDoneCell:td,cellObj,rowIx,cellIx,rObj,bObj:',obj)\n\t\t\t\t\tif(cellIx==0){//Storage.C.no //primary-key\n\t\t\t\t\t\tsys.dcb(td,'delete',function(){\n\t\t\t\t\t\t\tconsole.log(str,'no:td.onclick:',obj)\n\t\t\t\t\t\t\tif(confirm('Please confirm deletion of:',obj)){\n\t\t\t\t\t\t\t\tconsole.log(str,'no:td.onclick:confirmed delete',obj)\n\t\t\t\t\t\t\t\talert('not implemented yet')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(cellIx==1){//Storage.C.path\n\t\t\t\t\t\tsys.dcb(td,'rename-path',function(){\n\t\t\t\t\t\t\tvar x=prompt('Please enter new path:',obj.cellObj[1]);//console.log(str,'path:td.onclick:',obj)\n\t\t\t\t\t\t\tif(x){\n\t\t\t\t\t\t\t\tconsole.log(str,'path:td.onclick:confirmed rename:',x,obj)\n\t\t\t\t\t\t\t\talert('not implemented yet')\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(cellIx==2){//Storage.C.contentType\n\t\t\t\t\t\tsys.dcb(td,'change-contentType(drop-down-select)',function(){\n\t\t\t\t\t\t\tconsole.log(str,'contentType:td.onclick:',obj)\n\t\t\t\t\t\t})\n\t\t\t\t\t}else if(cellIx==3){//Storage.C.lastModified\n\t\t\t\t\t\tsys.dcb(td,'load-data/reload',function(){\n\t\t\t\t\t\t\tconsole.log(str,'lastModified:td.onclick:',obj)\n\t\t\t\t\t\t})\n\t\t\t\t\t}\n\t\t\t\t\t/*add buttons: reload,delete //depricated::save(check is there are changes)\n\t\t\t\t\t\t,rename-path\n\t\t\t\t\t\t,change-contentType drop-down-select\n\t\t\t\t\t\t,edit-data-as(\n\t\t\t\t\t\t\tplain-text (js ,or other) //maybe in the future color-code js-src-code\n\t\t\t\t\t\t\t, wysiwyg-html // onButtonSave dom2json\n\t\t\t\t\t\t\t, img upload/drag-n-drop\n\t\t\t\t\t\t\t, css introspection\n\t\t\t\t\t\t\t, json tree)\n\t\t\t\t\t* /\n\t\t\t\t\tvar b=\n\t\t\t\t\t[0,\t{\tt:'reload',param:obj\n\t\t\t\t\t\t\t,req:{\t'op':sys.Op.StorageGet,param:rObj\n\t\t\t\t\t\t\t\t//,onload:sys.bootStrap.introspection.init\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t,{\tt:'delete',param:obj,clk:function(){t:''\n\t\t\t\t\t\t\t\t,req:{'op':sys.Op.StorageGet,param:rObj\n\t\t\t\t\t\t\t\t\t,onload:function(){\n\t\t\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onload-ok',arguments\n\t\t\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr-ok for gui/dom '\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t,{\tt:'rename-path',param:obj,clk:function(){t:''\n\t\t\t\t\t\t\t\t,req:{'op':sys.Op.StorageGet,param:rObj\n\t\t\t\t\t\t\t\t,onload:function(){\n\t\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onload-ok',arguments\n\t\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr-ok for gui/dom '\n\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t,{\tt:'change-contentType'/*drop-down-select:\n\t\t\t\t\t\t\t\tplain-text\n\t\t\t\t\t\t\t\t, wysiwyg-html\n\t\t\t\t\t\t\t\t, img upload/drag-n-drop\n\t\t\t\t\t\t\t\t, css introspection\n\t\t\t\t\t\t\t\t, json tree* /,param:obj,clk:function(){t:''\n\t\t\t\t\t\t\t\t\t,req:{'op':sys.Op.StorageGet,param:rObj\n\t\t\t\t\t\t\t\t\t,onload:function(){\n\t\t\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onload-ok',arguments\n\t\t\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr-ok for gui/dom '\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t\t,{\tt:'edit-data',param:obj,clk:function(){t:''\n\t\t\t\t\t\t\t\t,req:{'op':sys.Op.StorageGet,param:rObj\n\t\t\t\t\t\t\t\t\t,onload:function(){\n\t\t\t\t\t\t\t\t\t\tconsole.log('Op.StorageNew:xhr.onload-ok',arguments\n\t\t\t\t\t\t\t\t\t\t\t,'TODO:need to implement js-onxhr-ok for gui/dom '\n\t\t\t\t\t\t\t\t\t\t);\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t}\n\t\t\t\t\t\t}\n\t\t\t\t\t]*/\n\t\t\t\t}\n\t\t\t},p)\n\t}//introspection.init\n\n\n\t,bldFilesList:function(filesList,p){\n\t\t//get-list from srvr, add entry , delete-entry, edit-entry\n\t }//bldFilesList:function\n\t,bldFiles:function(files,p){}\n\t/*,bldImgsList:function(imgsList,p){}\n\t,bldImgs:function(imgs,p){}\n\t,bldDbProjsList:function(projsList,p){}\n\t,bldDbProjBldFlr:function(pbf,p){}*/\n\t,props:{//json-props introspection (build gui/dom) , basically used with jsonRef=0\n\t\tinit:function(o,p){\n\t\t\t/*\n\n\t\t\t*/\n\t\t}//props.init\n\t}//props\n\t}//introspection\n}//bootStrap\n,dbSchema:{//server-side database tables\n\tstorage:[//columns\n\t\t {name:'no',type:'integer'}\n\t\t,{name:'path',type:'text'}\n\t\t,{name:'contentType',type:['text/plain','text/html'\n\t\t\t,'text/json','text/javascript','image/png','text/css']}\n\t\t,{name:'lastModified',type:'date-time'}\n\t\t,{name:'data',type:'textarea'}\n\t  ]//dbTbl storage\n\t,project:[\n\t\t{name:'no',type:'Integer'}\n\t\t,{name:'json',type:'json'}\n\t]//dbTbl Project\n\t,building:[\n\t\t{name:'no',type:'Integer'}\n\t\t,{name:'p',type:'Integer'}\n\t\t,{name:'json',type:'json'}\n\t]//dbTbl Building\n\t,floor:[\n\t\t{name:'no',type:'Integer'}\n\t\t,{name:'p',type:'Integer'}\n\t\t,{name:'b',type:'Integer'}\n\t\t,{name:'json',type:'json'}\n\t]//dbTbl Floor\n\t,sheet:[\n\t\t{name:'no'\t\t\t\t,type:'Integer',readonly:1\t,filter:\t3}\n\t\t,{name:'p'\t\t\t\t,type:'Integer',readonly:1\t,filter:1}\n\t\t,{name:'b'\t\t\t\t,type:'Integer',readonly:1\t,filter:2}\n\t\t,{name:'f'\t\t\t\t,type:'Integer',readonly:1\t,filter:\t3}\n\t\t,{name:'u'\t\t\t\t,type:'Integer',readonly:1\t,filter:8}\n\t\t,{name:'dt'\t\t\t\t,type:'date-time',readonly:1,filter:0}\n,{name:'TypeofMemberBeam'\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberColunm'\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberSlab'\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberStairs'\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberMansory'\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberRC'\t\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberFoundation'\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberOther'\t\t,type:'checkbox'\t\t\t,filter:\t9}\n,{name:'TypeofMemberOtherText'\t,type:'text'\t\t\t\t,filter:\t9}\n,{name:'exposure_wetDry'\t\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'exposure_chemical'\t\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'exposure_erosion'\t\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'exposure_elec'\t\t\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'exposure_heat'\t\t\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Dead'\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Live'\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Impact',type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Vibration',type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Traffic',type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Seismic',type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingCondition_Other'\t,type:'checkbox'\t\t\t,filter:12}\n,{name:'LoadingConditionOther'\t,type:'text'\t\t\t\t,filter:12}\n,{name:'GeneralCondition'\t\t,type:'radio',min:1,max:3\t,filter:\t10}\n,{name:'Distress_Cracking'\t\t,type:'checkbox'\t\t\t,filter:11}\n,{name:'Distress_Staining'\t\t,type:'checkbox'\t\t\t,filter:11}\n,{name:'Distress_Surface'\t\t,type:'checkbox'\t\t\t,filter:11}\n,{name:'Distress_Leaking'\t\t,type:'checkbox'\t\t\t,filter:11}\n,{name:'Cracking_Checking'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Craze'\t\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_D'\t\t\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Diagnol'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Hairline'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Longitudinal'\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Map'\t\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Pattern'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Plastic'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Random'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Shrinkage'\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Temperature'\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'Cracking_Transverse'\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'width'\t\t\t,min:0\t,type:'number',step:.05\t\t,filter:\t4}\n,{name:'Leaching'\t\t\t\t,type:'checkbox'\t\t\t,filter:\t4}\n,{name:'WorkingOrDormant'\t\t,type:'radio',min:1,max:2\t,filter:\t4}\n,{name:'Textural_AirVoid'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Blistering'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Bugholes'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_ColdJoints'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_ColdLines'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Discoloration'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Honeycomb'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Incrustation'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Laitance'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_SandPocket'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_SandStreak'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Segregation'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Staining'\t\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Stalactite'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Stalagmite'\t,type:'checkbox'\t\t\t,filter:6}\n,{name:'Textural_Stratification',type:'checkbox'\t\t\t,filter:6}\n,{name:'Distresses_Chalking'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Deflection'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Delamination',type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Distortion'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Dusting'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Exfoliation'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Leakage'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Peeling'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Warping'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Curling'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Deformation'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Disintegration',type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_DrummyArea'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Efflorescence',type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Exudation'\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_MortarFlaking',type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Distresses_Pitting'\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'JointDeficiencies'\t\t,type:'checkbox',master:1\t,filter:\t5}\n,{name:'Spall'\t\t\t\t\t,type:'checkbox'\t,m:1\t,filter:\t5}\n,{name:'SealantFailure'\t\t\t,type:'checkbox'\t,m:1\t,filter:\t5}\n,{name:'Leakage'\t\t\t\t,type:'checkbox'\t,m:1\t,filter:\t5}\n,{name:'Fault'\t\t\t\t\t,type:'checkbox'\t,m:1\t,filter:\t5}\n,{name:'Popout'\t\t\t\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'PopoutSize'\t\t\t\t,type:'radio',min:1,max:3\t,filter:\t5}\n,{name:'isScaling'\t\t\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'Scaling'\t\t\t\t,type:'radio',min:1,max:4\t,filter:\t5}\n,{name:'Exposed'\t\t\t\t,type:'checkbox'\t\t\t,filter:7}\n,{name:'Corroded'\t\t\t\t,type:'checkbox'\t\t\t,filter:7}\n,{name:'Snapped'\t\t\t\t,type:'checkbox'\t\t\t,filter:7}\n,{name:'isSpall'\t\t\t\t,type:'checkbox'\t\t\t,filter:\t5}\n,{name:'SpallSize'\t\t\t\t,type:'radio',min:1,max:2\t,filter:\t5}\n\t\t,{name:'notes'\t\t\t,type:'textarea'}\n\t\t,{name:'json'\t\t\t,type:'hidden'}\n\t]//dbTbl Sheet\n}//dbSchema\n,storageLib:{//methods for LocalStorage , and sync-ing with server\n\n\tfiles:{//css + html + js\n\t}//files\n\t,imgs:{}\n\t,projects:{}\n\t//,lib:{}//js with lastModified\n\t,offline:{}\n\t,lastModified:[]\n}//storageLib\n\n,Op:{//client facade reflection of server-Op,\n getAppBootStrap:function(){//, includes screens( jsonBld of html +css) and js app-lib\n\n\t}//getAppBootStrap:function\n ,login:function(){}\n ,logout:function(){}\n ,StorageList:'StorageList'\n ,StorageGet:'StorageGet'\n ,StorageScript:'StorageScript'\n ,StorageCss:'StorageCss'\n ,StorageImg:'StorageImg'\n ,StorageSet:'StorageSet'\n ,StorageNew:'StorageNew'\n\n /*,StorageDelete:'StorageDelete',StorageSyncOffline:'StorageSyncOffline'\n\n ,getDbProjBdlngFlr:function(){}  //,each project is loaded seperatly (packaged with proj are all buildings and Floors)\n ,getDbSheets:function(){}\t//sheets are loaded seperatly based on each dbTblFloor //must pageanate 1MBytes\n ,getSheetUploadsInfo:function(){}//info like lastModified , as for the content, just use http-get to get the content\n ,newProject:function(){}\n ,newBuilding:function(){}\n ,newFloor:function(){}\n ,newSheet:function(){}\n ,newUser:function(){}\n ,deleteProject:function(){}\n ,deleteBuilding:function(){}\n ,deleteFloor:function(){}\n ,deleteSheet:function(){}\n ,deleteUser:function(){}\n ,userChngPw:function(){}\n ,query:function(){}\n ,xhrEdit:function(){}\n ,saveSheet:function(){}\n ,syncLastModified:function(){} //check LM of proj,bld,flr,sheet,files,uploads,Logs,User,UserActivity\n ,syncOffline:function(){}\n\t\t,introspectProps:function(){}\n\t\t,introspectPropSet:function(){}\n\t\t,introspectPropRem:function(){}\n\t\t,introspectLog:function(){}*/\n}//Op\n\n}//sys\n\nconsole.log('sys.js loaded.');\n\nwindow.onload=sys.bootStrap.init\n"